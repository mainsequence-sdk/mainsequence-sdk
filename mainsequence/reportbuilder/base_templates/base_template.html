<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
  <title>{{ title }}</title>
  <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body,html{margin:0;padding:0;width:100%;background:#e0e0e0;font-family:{{ font_family }};}

    body {
      display: flex; flex-direction: column; align-items: center;
      min-height: 100vh; padding-top: 20px; padding-bottom: 80px;
      transition: padding 0.3s ease, background 0.3s ease;
      box-sizing: border-box;
    }
    #slidesContainer {
      width: 100%; display: flex; flex-direction: column; align-items: center;
    }
    .slide{
      position:relative; display:flex; flex-direction:column; overflow:hidden; box-sizing:border-box;
      width:338.667mm; height:190.5mm;
      padding:15mm; page-break-after:always; background:#f8f9fa;
      margin-bottom: 10mm; box-shadow: 0 0 5px rgba(0,0,0,0.1);
      transition: width 0.3s ease, height 0.3s ease, margin 0.3s ease, box-shadow 0.3s ease, padding 0.3s ease, transform 0.3s ease;
    }
    .slide-header,.slide-footer{
      position:absolute; left:15mm; right:15mm; display:flex; justify-content:space-between; align-items:center; z-index: 10;
    }
    .slide-header{top:5mm;} .slide-footer{bottom:5mm;font-size:0.85em;color:#555;}
    .slide-body{
      flex:1; display:flex; flex-direction:column;
      justify-content: center; /* Vertical Centering */
      align-items: center; /* Horizontal Centering */
      text-align: center; /* Center inline/text content */
      overflow: auto; /* Allow scrolling if content overflows */
      z-index: 5; position: relative; transition: all 0.3s ease;
    }
    .slide-logo img { max-height: 30px; width: auto; }


    {#Vertical image slide style#}
/* === Vertical Image Slide === */
.vertical-image-slide {
  /* define your column splits here (fallbacks: 20% / 80%) */
  --left: 20%;
  --right: 80%;

  display: flex;
  flex-direction: row;
  padding: 0;               /* so the right image can go full-bleed */
}

/* Left column: mimics the original slide padding, minus right side */
.vertical-image-slide .left-column {
  width: var(--left);
  padding: 15mm;            /* top, right, bottom, left */
  padding-right: 0;         /* remove inner gutter to image */
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Make body stretch to push footer down */
.vertical-image-slide .left-column .slide-body {
  flex: 1;
}

/* Stick footer to bottom of left column */
.vertical-image-slide .left-column .slide-footer {
  margin-top: auto;
}

/* Right column: completely flush, no padding or margin */
.vertical-image-slide .right-column {
  width: var(--right);
  padding: 0;
  margin: 0;
  display: flex;
  overflow: hidden;
}

/* Image fills its container exactly */
.vertical-image-slide .right-column img {
  width: 100%;
  height: 100%;
  object-fit: cover;        /* change to `contain` if you prefer */
  display: block;
}

/* Header/Footer flow inside the left-column */
.vertical-image-slide .slide-header,
.vertical-image-slide .slide-footer {
  position: relative !important;
  left: auto; right: auto;
  top: auto; bottom: auto;
  margin: 0 0 0.5em;
  justify-content: space-between;
}




    #buttonContainer { position: fixed; bottom: 20px; right: 20px; z-index: 1000; display: flex; gap: 10px; }
    #exportPdfButton, #playButton { padding: 10px 20px; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; box-shadow: 0 2px 4px rgba(0,0,0,0.2); transition: background-color 0.2s ease; display: flex; justify-content: center; align-items: center; }
    #exportPdfButton { background-color: #007bff; } #exportPdfButton:hover { background-color: #0056b3; }
    #playButton { background-color: #28a745; width: 50px; height: 40px; padding: 10px; font-size: 1.2rem; } #playButton:hover { background-color: #218838; }

    /* --- Fullscreen Mode Styles --- */
    body.fullscreen-mode {
      padding: 0; display: block; background: #333; overflow-y: scroll; min-height: 100vh;
    }
    body.fullscreen-mode #slidesContainer {
       width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
       gap: 5vh; padding: 5vh 0; box-sizing: border-box; min-height: 100vh;
    }
    body.fullscreen-mode .slide {
        width: 90vw;
        height: calc(90vw / (338.667 / 190.5));
        aspect-ratio: 338.667 / 190.5;
        max-width: 1600px;
        max-height: 90vh;
        margin-bottom: 0;
        box-shadow: 0 0 30px rgba(0,0,0,0.7);
        page-break-after: unset;
        border-radius: 8px;
    }

    /* --- Print Styles --- */
    @media print {
      body, html { background: #fff; }
      body { display: block; padding-top: 0; padding-bottom: 0; }
      .slide { margin-bottom: 0; box-shadow: none; width:338.667mm !important; height:190.5mm !important; }
      #buttonContainer { display: none; }
      @page { size: A4 landscape; margin: 0; }
    }
  </style>
</head>
<body>
  <div id='slidesContainer'>{{ slides|safe }}</div>

  <div id="buttonContainer">
      <button id="playButton" title="Toggle Fullscreen View"><i class="bi bi-play-fill"></i></button>
      <button id="exportPdfButton" title="Export to PDF">PDF</button>
  </div>

  <script>
    document.getElementById('exportPdfButton').addEventListener('click', function() {
      window.print();
    });

    const playButton = document.getElementById('playButton');
    const body = document.body;
    let isFullscreen = false;

    const playIcon = '<i class="bi bi-play-fill"></i>';
    const stopIcon = '<i class="bi bi-stop-fill"></i>';

    playButton.addEventListener('click', function() {
      isFullscreen = !isFullscreen;
      body.classList.toggle('fullscreen-mode', isFullscreen);

      if (isFullscreen) {
        playButton.innerHTML = stopIcon;
        playButton.title = 'Exit Fullscreen View';
        playButton.style.backgroundColor = '#dc3545';
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } else {
        playButton.innerHTML = playIcon;
        playButton.title = 'Toggle Fullscreen View';
        playButton.style.backgroundColor = '#28a745';
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    });

  </script>
</body>
</html>